version: '1.0'
steps:

  build_dev_step:
    type: build
    dockerfile: Dockerfile
    image_name: demochatnode

  RunningTests:
    title: Running tests
    image: ${{build_dev_step}}
    working_directory: /root/
    commands:
      - ls -l
      - npm start validate
    on_success:
      metadata:
        set:
          - '${{BuildingDockerImage.imageId}}':
              - CF_QUALITY: true
    on_fail:
      metadata:
        set:
          - '${{BuildingDockerImage.imageId}}':
              - CF_QUALITY: false
